<div class="content">
    <div class="container">
        <%= form_tag idea_problems_path, method: :get do %>
        <div class="d-flex mb-4">
            <%= text_field_tag :query,
                params[:query],
                class: "form-control",
                placeholder: "Search Title, Description or Category"
            %>
            <%= submit_tag "Search", class: "btn btn-dark" %>
        </div>
        <% end %>


        <div class="hide">
            <div class="d-flex">
                <p>Ideas <small>(<%= @idea_problems.where(type_idea: true).count %>)</small></p>
                <p>Problems <small>(<%= @idea_problems.where(type_idea: false).count %>)</small></p>
            </div>
            <%= form_tag idea_problems_path, method: :get do %>
            <div class="d-flex mb-4">
                <% Category.all.each do |cat| %>
                    <%= check_box_tag :query,
                        params[:query],
                        label: cat.name,
                        class: "form-controll"
                    %>
            <% end %>
                <%= submit_tag "Search", class: "btn btn-dark" %>
            </div>
            <% end %>
        
            <%= simple_form_for idea_problems_path, method: :get do |f| %>
                <%= f.input :category_ids, label: "Categories", collection: Category.all, as: :check_boxes, include_hidden: false %>
                <%= submit_tag "search", class: "btn btn-primary" %>
            <% end %>
        </div>

    </div>
</div>

<div class="wrapper">
    <div class="filter">
        <div class="filter-links">
            <h4 class="idea"><%= link_to "IDEAS", {controller: 'idea_problems', action: 'index', query: params[:query] = true}, method: 'get' %></h4>
            <h4 class="and">&</h4> 
            <h4 class="problem"><%= link_to "PROBLEMS", {controller: 'idea_problems', action: 'index', query: params[:query] = false}, method: 'get' %></h4>
        </div>
        <p><%= link_to "clear filter", {controller: 'idea_problems', action: 'index', query: params[:query] = ""}, method: 'get' %></p>
    </div>
    <div class="idea-grid">
        <% @idea_problems.each do |item| %>
            <%= render "shared/card_overview", item: item %>
        <% end %>
    </div>
</div>

<div class="arrow-top">
    <i class="fas fa-arrow-circle-up"></i>
</div>

<script>
document.querySelector(".form-control").value = "";
</script>
